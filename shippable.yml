# exclude
branches:
  except:
    - development

# include
branches:
  only:
    - master

# language setting
language: node_js

before_install:
  - shippable_retry npm install -g less
  - mkdir ./dist

script:
  - lessc ./less/creative.less ./css/creative.css
  - cp ./css -r ./dist/css
  - cp ./font-awesome -r  ./dist/font-awesome
  - cp ./fonts -r ./dist/fonts
  - cp ./img -r ./dist/img
  - cp ./js -r ./dist/js
  - cp ./index.html ./dist/index.html

after_success:
  - shippable_retry scp -pr ./dist conf4it@conf4itweb.cloudapp.net:conf4it
  - shippable_retry ssh conf4it@conf4itweb.cloudapp.net 'sudo rsync conf4it /var/www/html/'
  - shippable_retry ssh conf4it@conf4itweb.cloudapp.net 'rm -rf conf4it'
